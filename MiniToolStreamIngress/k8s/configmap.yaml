apiVersion: v1
kind: ConfigMap
metadata:
  name: minitoolstream-ingress-config
  namespace: minitoolstream
  labels:
    app: minitoolstream-ingress
    component: config
data:
  config.yaml: |
    server:
      port: 50051

    tarantool:
      address: "tarantool-service.minitoolstream.svc.cluster.local:3301"
      user: "minitoolstream_connector"
      timeout: 5s
      # Password will be loaded from secret via env vars
      vault_path: "secret/data/minitoolstream/tarantool"

    minio:
      endpoint: "minio-service.minitoolstream.svc.cluster.local:9000"
      use_ssl: false
      bucket_name: "minitoolstream"
      # Credentials will be loaded from secret via env vars
      vault_path: "secret/data/minitoolstream/minio"

    vault:
      enabled: false
      address: "http://vault.minitoolstream.svc.cluster.local:8200"
      namespace: ""

    logger:
      level: "info"
      format: "json"
      output_path: "stdout"

    ttl:
      enabled: true
      duration: 24h   # Delete messages older than 24 hours
      interval: 1h    # Run cleanup every hour
